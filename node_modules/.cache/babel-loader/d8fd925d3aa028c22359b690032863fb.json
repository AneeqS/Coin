{"ast":null,"code":"import _classCallCheck from \"/Users/AneeqShah/Desktop/temp/Coin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/AneeqShah/Desktop/temp/Coin/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/AneeqShah/Desktop/temp/Coin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/AneeqShah/Desktop/temp/Coin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/AneeqShah/Desktop/temp/Coin/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/AneeqShah/Desktop/temp/Coin/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/AneeqShah/Desktop/temp/Coin/src/components/list/List.js\";\n\n/**\n * Created by AneeqShah on 2/26/19.\n */\nimport React from 'react';\nimport { handleResponse } from '../../helpers';\nimport { API_URL } from '../../config';\nimport Loading from '../common/Loading';\nimport Table from './Table';\nimport Pagination from './Pagination';\n\nvar List =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(List, _React$Component);\n\n  function List() {\n    var _this;\n\n    _classCallCheck(this, List);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(List).call(this));\n    _this.state = {\n      loading: false,\n      currencies: [],\n      error: null,\n      totalPages: 0,\n      page: 1\n    };\n    _this.handlePaginationClick = _this.handlePaginationClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.fetch();\n    }\n  }, {\n    key: \"fetch\",\n    value: function (_fetch) {\n      function fetch() {\n        return _fetch.apply(this, arguments);\n      }\n\n      fetch.toString = function () {\n        return _fetch.toString();\n      };\n\n      return fetch;\n    }(function () {\n      var _this2 = this;\n\n      this.setState({\n        loading: true\n      });\n      var page = this.state.page;\n      fetch(\"\".concat(API_URL, \"/cryptocurrencies?page=\").concat(page, \"&perPage=20\")).then(handleResponse).then(function (data) {\n        var totalPages = data.totalPages,\n            currencies = data.currencies;\n\n        _this2.setState({\n          currencies: currencies,\n          totalPages: totalPages,\n          loading: false\n        });\n      }).catch(function (error) {\n        _this2.setState({\n          error: error.errorMessage,\n          loading: false\n        });\n      });\n    })\n  }, {\n    key: \"renderChange\",\n    value: function renderChange(percent) {\n      if (percent > 0) {\n        return React.createElement(\"span\", {\n          className: \"percent-raised\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, percent, \"% \\u2191\");\n      } else if (percent < 0) {\n        return React.createElement(\"span\", {\n          className: \"percent-fallen\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, percent, \"% \\u2193\");\n      } else {\n        return React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, percent);\n      }\n    }\n  }, {\n    key: \"handlePaginationClick\",\n    value: function handlePaginationClick(direction) {\n      var nextPage = this.state.page;\n      nextPage = direction === 'next' ? nextPage + 1 : nextPage - 1;\n      this.setState({\n        page: nextPage\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          loading = _this$state.loading,\n          error = _this$state.error,\n          currencies = _this$state.currencies,\n          page = _this$state.page,\n          totalPages = _this$state.totalPages; //render when loading data from API\n\n      if (loading) {\n        return React.createElement(\"div\", {\n          className: \"loading-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }));\n      } //render when error getting data from API\n\n\n      if (error) {\n        return React.createElement(\"div\", {\n          className: \"error\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, error);\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Table, {\n        currencies: currencies,\n        renderChange: this.renderChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(Pagination, {\n        totalPages: totalPages,\n        page: page,\n        handlePaginationClick: this.handlePaginationClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return List;\n}(React.Component);\n\nexport default List;","map":{"version":3,"sources":["/Users/AneeqShah/Desktop/temp/Coin/src/components/list/List.js"],"names":["React","handleResponse","API_URL","Loading","Table","Pagination","List","state","loading","currencies","error","totalPages","page","handlePaginationClick","bind","fetch","setState","then","data","catch","errorMessage","percent","direction","nextPage","renderChange","Component"],"mappings":"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","sourcesContent":["/**\n * Created by AneeqShah on 2/26/19.\n */\n\nimport React from 'react';\nimport {handleResponse} from '../../helpers';\nimport {API_URL} from '../../config';\nimport Loading from '../common/Loading';\nimport Table from './Table';\nimport Pagination from './Pagination';\n\nclass List extends React.Component{\n\n    constructor(){\n        super();\n\n        this.state = {\n            loading: false,\n            currencies: [],\n            error: null,\n            totalPages: 0,\n            page: 1,\n        };\n\n        this.handlePaginationClick = this.handlePaginationClick.bind(this);\n    }\n\n    componentWillMount(){\n        this.fetch();\n    }\n\n    fetch(){\n\n        this.setState({loading: true});\n\n        const {page} = this.state;\n\n        fetch(`${API_URL}/cryptocurrencies?page=${page}&perPage=20`)\n            .then(handleResponse)\n            .then((data) => {\n                const {totalPages, currencies} = data;\n\n                this.setState({\n                    currencies,\n                    totalPages,\n                    loading:false,\n\n                });\n            })\n            .catch((error) => {\n                this.setState({\n                    error: error.errorMessage,\n                    loading: false,\n                });\n            });\n\n    }\n\n\n    renderChange(percent){\n\n        if(percent > 0){\n            return <span className=\"percent-raised\">{percent}% &uarr;</span>\n        }else if(percent < 0){\n            return <span className=\"percent-fallen\">{percent}% &darr;</span>\n        }else{\n            return <span>{percent}</span>\n        }\n    };\n\n\n    handlePaginationClick(direction){\n\n        let nextPage = this.state.page;\n\n        nextPage = direction === 'next' ? nextPage + 1 : nextPage - 1;\n\n        this.setState({page: nextPage});\n\n    }\n\n    render(){\n\n\n        const {loading, error, currencies, page, totalPages} = this.state;\n\n        //render when loading data from API\n        if(loading){\n            return <div className=\"loading-container\"><Loading/></div>;\n        }\n\n        //render when error getting data from API\n        if(error){\n            return <div className=\"error\">{error}</div>\n        }\n\n\n        return (\n\n        <div>\n\n            <Table\n                currencies={currencies}\n                renderChange = {this.renderChange}\n            />\n\n            <Pagination\n\n                totalPages = {totalPages}\n                page = {page}\n                handlePaginationClick = {this.handlePaginationClick}\n            />\n\n        </div>\n\n        );\n    }\n\n}\n\nexport default List;"]},"metadata":{},"sourceType":"module"}